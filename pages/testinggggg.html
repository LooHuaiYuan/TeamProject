<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Test AC Temperature Control</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="p-5">

    <h2>Test AC Temperature Change</h2>

    <!-- Example AC Unit Card -->
    <div class="card w-50 mt-4">
        <div class="card-header d-flex justify-content-between align-items-center">
            <strong>Room 101</strong>
            <span class="badge bg-success">ON</span>
        </div>
        <div class="card-body text-center">
            <p>Current Temperature:</p>
            <div class="d-flex justify-content-center align-items-center mb-3">
                <button class="btn btn-outline-secondary me-3" onclick="changeTemp(101, -1)">-</button>
                <span class="fs-2" id="temp-value-101">20.0°C</span>
                <button class="btn btn-outline-secondary ms-3" onclick="changeTemp(101, 1)">+</button>
            </div>
            <p class="text-muted">This will update the temperature in the database.</p>
        </div>
    </div>

    <script>
        function changeTemp(roomId, delta) {
            const tempSpan = document.getElementById(`temp-value-${roomId}`);
            let currentTemp = parseFloat(tempSpan.textContent);
            const newTemp = currentTemp + delta;

            fetch('../php/update_ac_temperature.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ room_id: roomId, temperature: newTemp })
            })
                .then(response => response.json())
                .then(result => {
                    if (result.success) {
                        tempSpan.textContent = `${newTemp.toFixed(1)}°C`;
                        console.log("Temperature updated");
                    } else {
                        alert("Failed to update temperature: " + result.error);
                    }
                })
                .catch(error => {
                    alert("Error: " + error);
                    console.error('Error:', error);
                });
        }
    </script>

</body>

</html>